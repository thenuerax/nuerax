<!DOCTYPE html>
<html lang="en" class="bg-[#0F1115] text-[#F5F7FA] scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nuerax ‚Äî Real-Time AI News</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .fade-in {
        opacity: 0;
        transform: translateY(20px);
        animation: fadeIn 1s ease forwards;
      }
      @keyframes fadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body class="font-sans leading-relaxed text-base antialiased">

    <!-- Hero -->
    <section class="flex flex-col items-center text-center mt-24 px-4 fade-in">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 tracking-tight">
        The future is moving fast. <br />So are we.
      </h1>
      <p class="text-[#A1A6AD] max-w-xl mb-8">
        Real-time AI news, insights, and stock market impact ‚Äî curated for the next generation.
      </p>
      <a href="#feed" class="bg-[#00FFFF] text-black font-medium px-6 py-3 rounded-xl shadow hover:shadow-cyan-500/40 transition">
        Start Exploring ‚Üí
      </a>
    </section>

    <!-- Filter Bar -->
    <div class="mt-24 mb-8 flex flex-wrap justify-center gap-3 fade-in">
      <button class="filter-btn px-4 py-2 rounded-lg bg-[#1A1D21] hover:bg-[#00FFFF] hover:text-black transition" data-company="">All</button>
      <button class="filter-btn px-4 py-2 rounded-lg bg-[#1A1D21] hover:bg-[#00FFFF] hover:text-black transition" data-company="OpenAI">OpenAI</button>
      <button class="filter-btn px-4 py-2 rounded-lg bg-[#1A1D21] hover:bg-[#00FFFF] hover:text-black transition" data-company="Meta">Meta</button>
      <button class="filter-btn px-4 py-2 rounded-lg bg-[#1A1D21] hover:bg-[#00FFFF] hover:text-black transition" data-company="Google">Google</button>
      <button class="filter-btn px-4 py-2 rounded-lg bg-[#1A1D21] hover:bg-[#00FFFF] hover:text-black transition" data-company="Nvidia">Nvidia</button>
    </div>

    <!-- News Feed -->
    <section id="feed" class="w-full max-w-5xl mx-auto px-4 fade-in">
      <div id="news-container">
        <p class="text-[#A1A6AD]">Loading news...</p>
      </div>
    </section>

    <!-- Pro Teaser -->
    <section class="mt-32 mb-20 px-6 fade-in">
      <div class="backdrop-blur-md bg-white/5 border border-white/10 p-8 rounded-2xl shadow-md text-center max-w-xl mx-auto">
        <h3 class="text-2xl font-semibold mb-2">üîí Nuerax Pro (Coming Soon)</h3>
        <p class="text-[#A1A6AD] mb-4">
          Deeper insights, market analysis, and AI-stock impact breakdowns ‚Äî for members only.
        </p>
        <button class="bg-[#00FFFF] text-black font-semibold px-6 py-2 rounded-lg hover:scale-105 transition">
          Join Waitlist
        </button>
      </div>
    </section>

    <!-- Script -->
    <script>
      const newsContainer = document.getElementById('news-container');
      const filterButtons = document.querySelectorAll('.filter-btn');

      function getHoursAgo(dateString) {
        const hours = Math.floor((Date.now() - new Date(dateString)) / (1000 * 60 * 60));
        return hours < 1 ? 'Just now' : `${hours} hour${hours !== 1 ? 's' : ''} ago`;
      }

      function getCompanyLogo(article) {
        const source = article.source.name.toLowerCase();
        const title = article.title.toLowerCase();

        if (source.includes('openai') || title.includes('openai')) {
          return 'https://upload.wikimedia.org/wikipedia/commons/0/04/OpenAI_Logo.svg';
        } else if (source.includes('meta') || title.includes('meta')) {
          return 'https://upload.wikimedia.org/wikipedia/commons/0/05/Meta_Platforms_Logo.svg';
        } else if (source.includes('google') || title.includes('google')) {
          return 'https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg';
        } else if (source.includes('nvidia') || title.includes('nvidia')) {
          return 'https://upload.wikimedia.org/wikipedia/en/2/21/Nvidia_logo.svg';
        } else if (source.includes('microsoft') || title.includes('microsoft')) {
          return 'https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg';
        } else if (source.includes('amazon') || title.includes('amazon')) {
          return 'https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg';
        }

        return 'https://img.icons8.com/ios-filled/50/artificial-intelligence.png'; // fallback
      }

      function isAIArticle(article) {
        const keywords = ['ai', 'artificial intelligence', 'openai', 'robot', 'machine learning', 'deep learning'];
        const combined = `${article.title} ${article.description}`.toLowerCase();

        return keywords.some(keyword => combined.includes(keyword));
      }

      async function fetchNueraxNews(filter = '') {
        try {
          const companyQuery = filter || 'ai';
          const res = await fetch(`/api/news?company=${encodeURIComponent(companyQuery)}`);
          const articles = await res.json();

          const aiArticles = articles.filter(isAIArticle);

          newsContainer.innerHTML = '';

          if (!aiArticles.length) {
            newsContainer.innerHTML = '<p class="text-[#A1A6AD]">No relevant AI articles found.</p>';
            return;
          }

          aiArticles.forEach(article => {
            const timeAgo = getHoursAgo(article.publishedAt);
            const logoUrl = getCompanyLogo(article);

            const card = document.createElement('div');
            card.className = 'flex bg-[#1A1D21] rounded-xl overflow-hidden mb-6 shadow-lg hover:shadow-cyan-500/10 transition';

            card.innerHTML = `
              <div class="flex-shrink-0 bg-[#0F1115] p-4 flex items-center justify-center w-32 h-32">
                <img src="${logoUrl}" alt="logo" class="max-h-16 max-w-16 object-contain" />
              </div>
              <div class="p-5 flex flex-col justify-between">
                <div class="text-sm text-[#A1A6AD] mb-1">${timeAgo} ‚Ä¢ ${article.source.name}</div>
                <h3 class="text-lg font-semibold text-[#F5F7FA] mb-2">${article.title}</h3>
                <p class="text-[#A1A6AD] text-sm mb-3">${article.description || ''}</p>
                <a href="${article.url}" target="_blank" class="text-[#00FFFF] text-sm underline">Read full article ‚Üí</a>
              </div>
            `;

            newsContainer.appendChild(card);
          });
        } catch (err) {
          console.error('‚ùå Error fetching news:', err);
          newsContainer.innerHTML = '<p class="text-red-500">Failed to load news. Try again later.</p>';
        }
      }

      filterButtons.forEach(button => {
        button.addEventListener('click', () => {
          const company = button.getAttribute('data-company');
          fetchNueraxNews(company);
        });
      });

      fetchNueraxNews();
    </script>
  </body>
</html>
